From f502336718923a3acb8ab806f6d148c99d4a65e3 Mon Sep 17 00:00:00 2001
From: Philippe Gerum <rpm@xenomai.org>
Date: Wed, 3 Jul 2019 12:53:45 +0200
Subject: [PATCH] evl/sched: generalize use of evl_schedq_is_empty()

---
 kernel/evl/sched/core.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/kernel/evl/sched/core.c b/kernel/evl/sched/core.c
index 765fd4b7466b..143e0193cf5a 100644
--- a/kernel/evl/sched/core.c
+++ b/kernel/evl/sched/core.c
@@ -537,7 +537,7 @@ struct evl_thread *evl_get_schedq(struct evl_multilevel_queue *q)
 	struct list_head *head;
 	int idx;
 
-	if (q->elems == 0)
+	if (evl_schedq_is_empty(q))
 		return NULL;
 
 	idx = evl_get_schedq_weight(q);
@@ -569,7 +569,7 @@ struct evl_thread *evl_fifo_pick(struct evl_rq *rq)
 	struct list_head *head;
 	int idx;
 
-	if (q->elems == 0)
+	if (evl_schedq_is_empty(q))
 		return NULL;
 
 	/*
-- 
2.16.4

