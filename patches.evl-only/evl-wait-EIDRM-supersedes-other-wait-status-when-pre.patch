From 89a6c610da4573364a04283ddfd8573c1fba0af9 Mon Sep 17 00:00:00 2001
From: Philippe Gerum <rpm@xenomai.org>
Date: Wed, 9 Oct 2019 18:52:17 +0200
Subject: [PATCH] evl/wait: EIDRM supersedes other wait status when present

---
 include/evl/wait.h | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/include/evl/wait.h b/include/evl/wait.h
index d97de7d522d7..ff1b8e18b08a 100644
--- a/include/evl/wait.h
+++ b/include/evl/wait.h
@@ -57,12 +57,12 @@ struct evl_wait_queue {
 	no_ugly_lock();							\
 	evl_schedule();							\
 	__info = evl_current()->info;					\
-	if (__info & T_BREAK)						\
-		__ret = -EINTR;						\
+	if (__info & T_RMID)						\
+		__ret = -EIDRM;						\
 	else if (__info & T_TIMEO)					\
 		__ret = -ETIMEDOUT;					\
-	else if (__info & T_RMID)					\
-		__ret = -EIDRM;						\
+	else if (__info & T_BREAK)					\
+		__ret = -EINTR;						\
 	__ret;								\
 })
 
-- 
2.16.4

